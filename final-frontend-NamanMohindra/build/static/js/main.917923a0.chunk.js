(this.webpackJsonphw5=this.webpackJsonphw5||[]).push([[0],{42:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),r=a(22),c=a.n(r),o=(a(42),a(43),a(16)),i=a(10),l=a(6),u=a(7),d=a.n(u),m=a(13),j=a(2),b=a(4),p=a.n(b),h="https://final-backendd.herokuapp.com";function f(e,t,a,s,n,r,c){return O.apply(this,arguments)}function O(){return(O=Object(m.a)(d.a.mark((function e(t,a,s,n,r,c,o){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.post("".concat(h,"/register"),{displayName:o,username:t,password:a,email:s,zipcode:n,dob:r,phone:c},{withCredentials:"include"}).then((function(e){return e.status})).catch((function(e){var t=e.toJSON();if(409===t.status)return t.status})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return x.apply(this,arguments)}function x(){return(x=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.post("".concat(h,"/login"),{username:t,password:a},{withCredentials:"include"}).then((function(e){return e})).catch((function(e){var t=e.toJSON();if(401===t.status||403===t.status||404===t.status)return t})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.get("".concat(h,"/profile"),{withCredentials:"include"}).then((function(e){console.log(e.data),t.setPlaceholderUsers(e.data),t.checkLocalStorage(),t.setUserStatus(e.data),t.setFollowerInfo(),p.a.get("".concat(h,"/articles"),{withCredentials:"include"}).then((function(e){var a=e.data.articles;a.sort((function(e,t){return Date.parse(e.date)>Date.parse(t.date)?-1:1})),t.setPosts(a)}))})).catch((function(e){401===e.status&&(t.history.push("/"),localStorage.username="")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return N.apply(this,arguments)}function N(){return(N=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.a.get("".concat(h,"/profile/").concat(t),{withCredentials:"include"}).then((function(e){return e.data.profile})),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=a(0);var y=function(e){var t=Object(s.useState)(""),a=Object(j.a)(t,2),n=a[0],r=a[1],c=Object(s.useState)(""),o=Object(j.a)(c,2),i=o[0],l=o[1],u=Object(s.useState)(""),b=Object(j.a)(u,2),p=b[0],h=b[1],f=Object(s.useState)(!1),O=Object(j.a)(f,2),x=O[0],w=O[1],v=function(){var t=Object(m.a)(d.a.mark((function t(a){var s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,g(n,i);case 3:401===(s=t.sent).status?(h("User is not registered yet"),w(!0)):403===s.status?(h("Invalid Credentials"),w(!0)):404===s.status?(h("something went wrong"),w(!0)):400===s.status?(h(" Username and password fields should not be empty"),w(!0)):(localStorage.username=n,e.history.push("/Main"));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"border-0 ",children:Object(S.jsxs)("div",{className:"col-lg-5 justify-content-center",children:[Object(S.jsx)("h3",{children:"Login"}),x&&Object(S.jsx)("div",{className:"alert alert-warning",role:"alert",children:p}),Object(S.jsxs)("form",{className:"login",children:[Object(S.jsxs)("div",{className:"col-12 mb-4 pt-2",children:[Object(S.jsx)("label",{htmlFor:"username",children:"Username"}),Object(S.jsx)("input",{type:"text",className:"form-control",id:"username",required:!0,onChange:function(e){return r(e.target.value)}})]}),Object(S.jsxs)("div",{className:"col-12 mb-4 ",children:[Object(S.jsx)("label",{children:"Password"}),Object(S.jsx)("input",{type:"password",className:"form-control",id:"password",onChange:function(e){return l(e.target.value)},required:!0})]}),Object(S.jsxs)("div",{className:"col-12 mb-2",children:[Object(S.jsx)("button",{type:"submit",className:"btn text-white mt-2 rad",id:"login",style:{backgroundColor:"#254E58",width:"99%"},onClick:v.bind(this),children:"Login"}),Object(S.jsx)("a",{href:"https://final-backendd.herokuapp.com/auth/google",children:" Login With Google"})]})]})]})})},C=a(8);var k=function(e){var t=Object(s.useState)(""),a=Object(j.a)(t,2),n=a[0],r=a[1],c=Object(s.useState)(""),o=Object(j.a)(c,2),i=o[0],l=o[1],u=Object(s.useState)(""),b=Object(j.a)(u,2),p=b[0],h=b[1],O=Object(s.useState)(""),g=Object(j.a)(O,2),x=g[0],w=g[1],v=Object(s.useState)(""),N=Object(j.a)(v,2),y=N[0],k=N[1],E=Object(s.useState)(""),I=Object(j.a)(E,2),P=I[0],U=I[1],L=Object(s.useState)(""),T=Object(j.a)(L,2),A=T[0],D=T[1],M=Object(s.useState)(""),F=Object(j.a)(M,2),_=F[0],z=F[1],Z=Object(s.useState)([]),R=Object(j.a)(Z,2),V=R[0],$=R[1],B=Object(s.useState)(!1),G=Object(j.a)(B,2),H=G[0],J=G[1],q=function(){var t=Object(m.a)(d.a.mark((function t(a){var s,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),s=[],r=!1,$([]),J(!1),/^[a-zA-Z]{1}[a-z0-9]*$/i.test(n)||(s.push("Account Name invalid. First word must be a letter "),r=!0),/^[a-zA-Z]{1}[a-z0-9]*$/i.test(i)||(s.push("Display Name invalid. First word must be a letter "),r=!0),""!==p&&/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(p)||(s.push("Invalid Email"),r=!0),""!==x&&/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/.test(x)||(s.push("Invalid Phone Number "),r=!0),""!==P&&/^\d{5}(?:[-\s]\d{4})?$/.test(P)||(s.push("Invalid Zipcode"),r=!0),""!==A&&""!==_&&A===_||(s.push("Invalid password. Password must match Confirmation password "),r=!0),!0!==r){t.next=17;break}return J(r),$((function(e){return[s].concat(Object(C.a)(e))})),t.abrupt("return",V);case 17:return t.next=19,f(n,A,p,P,y,x);case 19:if(409!==t.sent){t.next=29;break}if(s.push("User Already Exists"),!0!==(r=!0)){t.next=27;break}return $((function(e){return[s].concat(Object(C.a)(e))})),J(r),t.abrupt("return",V);case 27:t.next=31;break;case 29:localStorage.username=n,e.history.push("/Main");case 31:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"card border-0",children:Object(S.jsxs)("div",{className:"card-body",children:[Object(S.jsx)("h3",{className:"card-title",children:"Register"}),H&&Object(S.jsx)("div",{className:"alert alert-warning",role:"alert",children:Object(S.jsx)("ul",{className:"list-unstyled",children:V[0].map((function(e,t){return Object(S.jsx)("li",{children:Object(S.jsx)("div",{children:e})},t)}))})}),Object(S.jsx)("form",{className:"login",children:Object(S.jsxs)("div",{className:"row pt-lg-2",children:[Object(S.jsxs)("div",{className:"col-lg-6",children:[Object(S.jsx)("label",{htmlFor:"username",children:"User Name"}),Object(S.jsx)("input",{type:"text",className:"form-control pb-2",onChange:function(e){return r(e.target.value)},placeholder:"User Name",id:"username"}),Object(S.jsx)("label",{children:"Email Address*"}),Object(S.jsx)("input",{type:"email",className:"form-control pb-2",id:"email",onChange:function(e){return h(e.target.value)},placeholder:"Email Address"}),Object(S.jsx)("label",{children:"Phone Number"}),Object(S.jsx)("input",{type:"tel",id:"tel",className:"form-control pb-2",onChange:function(e){return w(e.target.value)},placeholder:"Phone Number"}),Object(S.jsx)("label",{children:"Password"}),Object(S.jsx)("input",{type:"password",id:"pwd",className:"form-control pb-2",onChange:function(e){return D(e.target.value)},placeholder:"Password"}),Object(S.jsx)("div",{className:"pt-2",children:Object(S.jsx)("input",{type:"reset",className:"btn text-white mt-2 rad",style:{backgroundColor:"#254E58",width:"99%"},onClick:function(){$([]),J(!1),r(""),l(""),h(""),w(""),U(""),D(""),z("")}.bind(this),value:"Clear"})})]}),Object(S.jsxs)("div",{className:"col",children:[Object(S.jsx)("label",{children:"Display Name"}),Object(S.jsx)("input",{type:"text",id:"dname",className:"form-control pb-2",onChange:function(e){return l(e.target.value)},placeholder:"Display Name"}),Object(S.jsx)("label",{children:"Date of Birth"}),Object(S.jsx)("input",{type:"date",id:"dob",className:"form-control pb-2",onChange:function(e){return k(e.target.value)},placeholder:"DOB"}),Object(S.jsx)("label",{children:"Zip Code"}),Object(S.jsx)("input",{type:"text",id:"zip",className:"form-control pb-2",onChange:function(e){return U(e.target.value)},placeholder:"Zip Code",maxLength:5}),Object(S.jsx)("label",{children:"Confirm Password"}),Object(S.jsx)("input",{type:"password",id:"pwd2",className:"form-control pb-2",onChange:function(e){return z(e.target.value)},placeholder:"Confirm Password"}),Object(S.jsx)("div",{className:"pt-2",children:Object(S.jsx)("button",{className:"btn text-white mt-2 rad",id:"submit",style:{backgroundColor:"#254E58",width:"99%"},onClick:q.bind(this),children:"Submit"})})]})]})})]})})},E="SET_FOLLOWER_INFO",I="SET_PLACEHOLDER_USERS",P="CHECK_LOCAL_STORAGE",U="UPDATE_USER_STATUS",L="SET_POSTS",T="SEARCH_POSTS",A="ADD_POST",D="LOGOUT",M="SET_USER_STATUS",F="ADD_COMMENTS",_="EDIT_ARTICLE",z="EDIT_COMMENT";function Z(){return{type:P}}function R(e,t,a,s,n){return{type:E,following:e,fImg:t,fStatus:a,fNames:s,fUserNames:n}}function V(e){return{type:I,users:e}}function $(){return{type:D}}var B=Object(o.b)((function(e){return{loginErrorMessage:e.loginErrorMessage,loginShowError:e.loginShowError,registerErrorMessage:e.registerErrorMessage,registerShowError:e.registerShowError}}),(function(e){return{loginValidation:function(t,a,s){return e(function(e,t,a){return{type:"LOGIN_VALIDATION",username:e,password:t,history:a}}(t,a,s))},registerValidation:function(t,a,s,n,r,c,o,i,l){return e(function(e,t,a,s,n,r,c,o,i){return{type:"REGISTER_VALIDATION",accountName:e,displayName:t,email:a,phone:s,dob:n,zip:r,password:c,confirmPassword:o,history:i}}(t,a,s,n,r,c,o,i,l))},setPlaceholderUsers:function(t){return e(V(t))}}}))((function(e){return Object(s.useEffect)((function(){localStorage.getItem("username")&&e.history.push("/main")})),Object(S.jsxs)("div",{children:[Object(S.jsx)("nav",{className:"navbar sticky-top navbar-dark navbar-expand-sm py-3 mb-3",style:{backgroundColor:"#4f4a41"},children:Object(S.jsx)(i.a,{children:Object(S.jsx)(i.b,{to:"/main",className:"navbar-brand mx-2",children:"InstaBook"})})}),Object(S.jsx)("div",{className:"container",children:Object(S.jsxs)("div",{className:"row p-5",children:[Object(S.jsx)("div",{className:"col-5 pt-5",children:Object(S.jsx)(y,{history:e.history,loginValidation:e.loginValidation,loginErrorMessage:e.loginErrorMessage,loginShowError:e.loginShowError})}),Object(S.jsx)("div",{className:"col pt-5",children:Object(S.jsx)(k,{history:e.history,registerValidation:e.registerValidation,registerErrorMessage:e.registerErrorMessage,registerShowError:e.registerShowError})})]})})]})}));var G=function(e){return Object(S.jsx)("div",{className:"border-0",children:Object(S.jsxs)("div",{className:"p-1",children:[Object(S.jsx)("img",{src:e.img,alt:"Missing",className:"rounded mt-2 w-100 image"}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-lg-9",children:[Object(S.jsx)("h4",{className:"font-size-lg",children:e.username}),Object(S.jsxs)("p",{children:[e.status,"  "]})]}),Object(S.jsx)("div",{className:"col-lg-3",children:Object(S.jsx)("button",{type:"submit",className:"btn float-right text-white mt-2 mb-2 ml-2 rad",id:"unfollowbtn",style:{backgroundColor:"#254E58"},onClick:function(){return e.deleteFollow(e.username)},children:"Unfollow"})})]})]})})},H="https://final-backendd.herokuapp.com";var J=Object(o.b)(null,(function(e){return{AddComments:function(t,a){return e(function(e,t){return{type:F,articleId:e,comments:t}}(t,a))},EditArticle:function(t,a){return e(function(e,t){return{type:_,articleId:e,newText:t}}(t,a))},EditComment:function(t,a,s){return e(function(e,t,a){return{type:z,articleId:e,comments:t,commentId:a}}(t,a,s))}}}))((function(e){var t=Object(s.useState)(!1),a=Object(j.a)(t,2),n=a[0],r=a[1],c=Object(s.useState)(""),o=Object(j.a)(c,2),i=o[0],l=o[1],u=Object(s.useState)("Show Comments"),d=Object(j.a)(u,2),m=d[0],b=d[1],h=Object(s.useState)(""),f=Object(j.a)(h,2),O=f[0],g=f[1],x=Object(s.useState)(""),w=Object(j.a)(x,2),v=w[0],N=w[1];return Object(S.jsx)("div",{className:"card border-secondary mb-1",children:Object(S.jsxs)("div",{className:"card-body ",children:[Object(S.jsx)("h5",{className:"card-title d-inline-block",children:e.username}),e.img&&Object(S.jsx)("img",{src:e.img,alt:"",className:"w-100p-2 image"}),Object(S.jsx)("p",{className:"card-text",children:e.post}),Object(S.jsx)("input",{type:"text",className:"form-control d-inline-block",onChange:function(e){return g(e.target.value)},placeholder:"New Text"}),Object(S.jsx)("button",{className:"btn text-white mt-2 mb-2 rad",style:{backgroundColor:"#254E58",width:"99%"},onClick:function(){""!==O&&void 0!==O&&p.a.put("".concat(H,"/articles/").concat(e.postid),{text:"".concat(O)},{withCredentials:"include"}).then((function(t){e.EditArticle(t.data.articles[0][0].articleId,t.data.articles[0][0].text)}))},children:"Edit"}),Object(S.jsx)("input",{type:"text",className:"form-control d-inline-block",onChange:function(e){return l(e.target.value)},placeholder:"Comment"}),Object(S.jsxs)("div",{className:"row pt-3",children:[Object(S.jsx)("div",{className:"col",children:Object(S.jsx)("button",{className:"text-white mt-2 mb-2 rad",id:"button1",style:{marginRight:"1%",backgroundColor:"#254E58",width:"100%"},onClick:function(){""!==i&&void 0!==i&&p.a.put("".concat(H,"/articles/").concat(e.postid),{text:"".concat(i),commentId:-1},{withCredentials:"include"}).then((function(t){e.AddComments(e.postid,t.data.comments)}))},children:"Comment"})}),Object(S.jsx)("div",{className:"col",children:Object(S.jsx)("button",{className:"text-white mt-2 mb-2 rad ",id:"button2",onClick:function(){n?(b("Show Comments"),r(!n)):(r(!n),b("Hide Comments"))},style:{marginRight:"1%",backgroundColor:"#254E58",width:"100%"},children:m})})]}),n?Object(S.jsxs)("div",{children:[Object(S.jsx)("h6",{className:"card-title d-inline-block",children:"Comments:"}),Object(S.jsx)("div",{id:"com",children:e.comments.map((function(t,a){return Object(S.jsx)("div",{className:"card-text",children:Object(S.jsxs)("li",{className:"pt-1 list-group-item",children:[Object(S.jsx)("div",{children:e.comments[a].username}),e.comments[a].comment,"  ",Object(S.jsx)("input",{type:"text",className:"form-control d-inline-block",onChange:function(e){return N(e.target.value)}}),Object(S.jsx)("button",{className:"text-white mt-2 mb-2 rad ",id:"button2",style:{marginRight:"1%",backgroundColor:"#254E58",display:"inline-block"},onClick:function(){!function(t){""!==v&&void 0!==v&&(console.log(t,v),p.a.put("".concat(H,"/articles/").concat(e.postid),{text:"".concat(v),commentId:t},{withCredentials:"include"}).then((function(a){e.EditComment(a.data.articleId,a.data.comments,t)})))}(e.comments[a].commentId)},children:"Edit Comment"})]},t)})}))})]}):Object(S.jsx)(S.Fragment,{}),Object(S.jsx)("p",{className:"text-muted ms-3",style:{textAlign:"right",marginRight:"1%"},children:Object(S.jsx)("small",{children:e.time})})]})})}));var q=function(e){var t=Object(s.useState)(e.status),a=Object(j.a)(t,2),n=a[0],r=a[1];return Object(S.jsx)("div",{className:"card border-0",children:Object(S.jsxs)("div",{className:"card-body ",children:[Object(S.jsx)("img",{src:e.img,alt:"",className:"w-100 p-2 image"}),Object(S.jsx)("p",{children:localStorage.getItem("status:".concat(localStorage.getItem("username")))?localStorage.getItem("status:".concat(localStorage.getItem("username"))):e.status}),Object(S.jsx)("div",{className:"input-group mt-2",children:Object(S.jsxs)("div",{className:"form-floating flex-grow-1",children:[Object(S.jsx)("input",{type:"text",className:"form-control rad",id:"statusInput",placeholder:"Update status",onChange:function(e){return r(e.target.value)},required:!0}),Object(S.jsx)("button",{className:"btn text-white mt-2 mb-2 rad",id:"statusUpdate",style:{backgroundColor:"#254E58",width:"99%"},onClick:function(){""!==n&&void 0!==n&&(p.a.put("".concat("https://final-backendd.herokuapp.com","/headline"),{headline:"".concat(n)},{withCredentials:"include"}),e.setStatus(n),localStorage.setItem("status:".concat(localStorage.getItem("username")),n))}.bind(this),children:"Update"})]})})]})})},W="https://final-backendd.herokuapp.com";var K=Object(o.b)((function(e){return{username:e.username,posts:e.posts,userStatus:e.userStatus,following:e.following,followingImgs:e.followingImgs,followingStatus:e.followingStatus,followingNames:e.followingNames,followingUserNames:e.followingUserNames,profileImg:e.profileImg,showAddFollowError:e.showAddFollowError,AddFollowErrorMessage:e.AddFollowErrorMessage,comments:e.comments}}),(function(e){return{setFollowerInfo:function(){return e(R())},updateUserStatus:function(t){return e(function(e){return{type:U,userStatus:e}}(t))},setPlaceholderUsers:function(t){return e(V(t))},checkLocalStorage:function(){return e(Z())},setPosts:function(t){return e(function(e){return{type:L,posts:e}}(t))},searchPosts:function(t){return e(function(e){return{type:T,keyword:e}}(t))},addPost:function(t,a,s,n){return e(function(e,t,a,s){return{type:A,postText:e,postImage:t,articleId:a,postTime:s}}(t,a,s,n))},logout:function(){return e($())},setUserStatus:function(){return e({type:M})}}}))((function(e){var t=Object(s.useState)(""),a=Object(j.a)(t,2),n=a[0],r=a[1],c=Object(s.useState)(""),o=Object(j.a)(c,2),l=o[0],u=o[1],d=Object(s.useState)([]),m=Object(j.a)(d,2),b=m[0],h=m[1],f=Object(s.useState)(!1),O=Object(j.a)(f,2),g=O[0],x=O[1],v=Object(s.useState)(""),N=Object(j.a)(v,2),y=N[0],k=N[1],E=new FormData,I=function(e){p.a.delete("".concat(W,"/following/").concat(e),{withCredentials:"include"}).then((function(t){var a=t.data.following;return h(Object(C.a)(a)),e})),R()};return Object(s.useEffect)((function(){localStorage.username?function(e){w.apply(this,arguments)}(e):(e.history.push("/"),localStorage.username="")}),[b.length]),Object(S.jsxs)("div",{children:[Object(S.jsxs)("nav",{className:"navbar sticky-top navbar-dark navbar-expand-sm py-2 mb-2",style:{backgroundColor:"#4f4a41"},children:[Object(S.jsx)(i.b,{to:"/main",className:"navbar-brand mx-2",children:" InstaBook "}),Object(S.jsx)("div",{className:"navbar-collapse justify-content-end",children:Object(S.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(i.b,{to:"/profile",className:"nav-link",href:"#",children:"Profile"})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(i.b,{to:"/",className:"nav-link",id:"logout",onClick:function(){return e.logout(),void p.a.put("".concat(W,"/logout"),{withCredentials:"include"}).then((function(e){return e.status}))},children:"Logout"})})]})})]}),Object(S.jsx)("div",{className:"container-fluid pt-1",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-3 p-1",children:[Object(S.jsx)("h2",{style:{fontSize:"40px"},children:"Following"}),Object(S.jsx)("input",{type:"text",className:"form-control",id:"followText",placeholder:"Username",onChange:function(e){return r(e.target.value)}}),g&&Object(S.jsx)("div",{className:"alert alert-danger",role:"alert",children:y}),Object(S.jsx)("button",{type:"submit",className:"btn btn-warning form-control mt-1 rad",style:{backgroundColor:"#254E58",width:"99%"},onClick:function(){return function(t){""!==t&&(t===e.username?(k("Cannot Follow Yourself"),x(!0)):e.followingUserNames.includes(t)?(k("Already Following User"),x(!0)):(p.a.put("".concat(W,"/following/").concat(t),null,{withCredentials:"include"}).then((function(e){var a=e.data.following;return h(Object(C.a)(a)),t})).catch((function(e){k("User does not exist"),x(!0)})),x(!1),k(""),R()))}(n)},children:"Follow"}),Object(S.jsx)("ul",{className:"list-group list-group-flush border-0",children:e.following.map((function(t,a){return Object(S.jsx)("li",{className:"pt-1 border-0",children:Object(S.jsx)("div",{children:Object(S.jsx)(G,{username:e.followingUserNames[a],status:e.followingStatus[a],img:e.followingImgs[a],deleteFollow:I})})},a)}))})]}),Object(S.jsxs)("div",{className:"col-6",children:[Object(S.jsx)("h3",{style:{fontSize:"40px"},children:"Posts"}),Object(S.jsx)("div",{className:"input-group pb-1",children:Object(S.jsx)("input",{type:"text",className:"form-control d-inline-block rad ",id:"searchtext",placeholder:"Search for posts",onChange:function(t){return e.searchPosts(t.target.value)}})}),Object(S.jsx)("ul",{className:"list-group list-group-flush border-0 pt-1 images",id:"posts",children:e.posts.map((function(e,t){return e.showPost&&Object(S.jsx)("div",{children:Object(S.jsx)(J,{img:e.postImg,username:e.username,post:e.text,comments:e.comments,time:e.postTime,postid:e.articleId})},t)}))})]}),Object(S.jsxs)("div",{className:"col-3",children:[Object(S.jsx)("h2",{style:{fontSize:"40px"},children:e.username}),Object(S.jsx)(q,{img:e.profileImg,username:e.username,status:e.userStatus,setStatus:e.updateUserStatus}),Object(S.jsx)("div",{className:"card border-0",children:Object(S.jsxs)("div",{className:"card-body",children:[Object(S.jsx)("h5",{className:"card-title",children:"Create Post"}),Object(S.jsxs)("form",{children:[Object(S.jsx)("textarea",{className:"form-control rad",id:"newPostText",onChange:function(e){return u(e.target.value)}}),Object(S.jsx)("div",{className:"pt-1",children:Object(S.jsx)("input",{type:"file",className:"form-control",onChange:function(e){return function(e){E.append("image",e.target.files[0])}(e)}})}),Object(S.jsx)("div",{className:"row pt-1",children:Object(S.jsx)("div",{className:"col",children:Object(S.jsx)("button",{className:"btn text-white mb-2 rad",style:{backgroundColor:"#254E58",width:"99%"},onClick:function(t){t.preventDefault(),""!==l&&(E.append("text",l),p.a.post("".concat(W,"/article"),E,{withCredentials:"include"}).then((function(t){e.addPost(l,t.data.articles[0].img,t.data.articles[0].articleId,t.data.articles[0].date)})).catch((function(t){t.status&&(e.history.push("/"),localStorage.username="")})),document.getElementById("newPostText").value="",u(""))}.bind(this),children:"Post"})})})]})]})})]})]})})]})})),Y="https://final-backendd.herokuapp.com";var Q=Object(o.b)((function(e){return{username:e.username,profileImg:e.profileImg,profileName:e.profileName,profileEmail:e.profileEmail,profilePhone:e.profilePhone,profileZip:e.profileZip,profilePassword:e.profilePassword,profileError:e.profileError,profileSuccess:e.profileSuccess,profileErrorMessage:e.profileErrorMessage,profileSuccessMessage:e.profileSuccessMessage}}),(function(e){return{setPlaceholderUsers:function(t){return e(V(t))},checkLocalStorage:function(){return e(Z())},logout:function(){return e($())}}}))((function(e){var t=Object(s.useState)(""),a=Object(j.a)(t,2),n=(a[0],a[1]),r=Object(s.useState)(""),c=Object(j.a)(r,2),o=c[0],l=c[1],u=Object(s.useState)(""),b=Object(j.a)(u,2),h=b[0],f=b[1],O=Object(s.useState)(""),g=Object(j.a)(O,2),x=g[0],w=g[1],v=Object(s.useState)(""),N=Object(j.a)(v,2),y=N[0],k=N[1],E=Object(s.useState)(""),I=Object(j.a)(E,2),P=I[0],U=I[1],L=Object(s.useState)(!1),T=Object(j.a)(L,2),A=T[0],D=T[1],M=Object(s.useState)(!1),F=Object(j.a)(M,2),_=F[0],z=F[1],Z=Object(s.useState)([]),R=Object(j.a)(Z,2),V=R[0],$=R[1],B=Object(s.useState)([]),G=Object(j.a)(B,2),H=G[0],J=G[1],q=new FormData;Object(s.useEffect)((function(){!function(e){localStorage.username?p.a.get("".concat(Y,"/profile"),{withCredentials:"include"}).then((function(t){e.setPlaceholderUsers(t.data),e.checkLocalStorage()})).catch((function(e){e.status})):(e.history.push("/"),localStorage.username="")}(e)}),[A,_,V,H,e.profileImg]);var W=function(){var t=Object(m.a)(d.a.mark((function t(a){var s,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),s=[],n=[],r=!1,D(!1),z(r),$((function(e){return[]})),J((function(e){return[]})),""!==o&&o!==e.profileEmail&&(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(o)?(s.push("Email updated from "+e.profileEmail+" to "+o),p.a.put("".concat(Y,"/email"),{email:o},{withCredentials:"include"}).then((function(t){200===t.status&&(e.setPlaceholderUsers(t.data.doc),e.checkLocalStorage())}))):n.push("Invalid Email input")),""!==h&&h!==e.profilePhone&&(/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/.test(h)?(s.push("Phone updated from "+e.profilePhone+" to "+h),p.a.put("".concat(Y,"/phone"),{phone:h},{withCredentials:"include"}).then((function(t){200===t.status&&(e.setPlaceholderUsers(t.data.doc),e.checkLocalStorage())}))):n.push("Invalid Phone input")),""!==x&&x!==e.profileZip&&(/^\d{5}(?:[-\s]\d{4})?$/.test(x)?(s.push("Zipcode updated from "+e.profileZip+" to "+x),p.a.put("".concat(Y,"/zipcode"),{zip:x},{withCredentials:"include"}).then((function(t){200===t.status&&(e.setPlaceholderUsers(t.data.doc),e.checkLocalStorage())}))):n.push("Invalid zipcode input")),""!==y&&y!==e.password&&y===P&&(console.log(y,P),s.push("Password updated"),p.a.put("".concat(Y,"/password"),{password:y},{withCredentials:"include"}).then((function(e){}))),0!==s.length&&(J([s].concat(Object(C.a)(H))),z(r=!0)),0!==n.length&&($((function(e){return[n].concat(Object(C.a)(e))})),D(!0)),!0!==A){t.next=17;break}return t.abrupt("return",V);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsxs)("div",{children:[Object(S.jsxs)("nav",{className:"navbar sticky-top navbar-dark navbar-expand-sm py-2 mb-2",style:{backgroundColor:"#4f4a41"},children:[Object(S.jsx)(i.b,{to:"/main",className:"navbar-brand mx-2",children:"InstaBook"}),Object(S.jsx)("div",{className:"navbar-collapse justify-content-end",children:Object(S.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(i.b,{to:"/main",className:"nav-link",children:"Main Page"})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(i.b,{to:"/",id:"logout",className:"nav-link",onClick:function(){return e.logout(),void p.a.put("".concat(Y,"/logout"),{withCredentials:"include"}).then((function(e){return e.status}))},children:"Logout"})})]})})]}),Object(S.jsx)("div",{className:"container",children:Object(S.jsxs)("div",{className:"row pt-5",children:[Object(S.jsx)("div",{className:"col-5",children:Object(S.jsx)("div",{className:"card border-0",children:Object(S.jsxs)("div",{className:"card-body",children:[Object(S.jsx)("img",{src:e.profileImg,className:"w-100",alt:""}),Object(S.jsxs)("div",{className:"pt-2",children:[Object(S.jsx)("input",{type:"file",className:"form-control",onChange:function(e){return function(e){q.append("image",e.target.files[0])}(e)}}),Object(S.jsx)("button",{type:"submit",onClick:function(){q.has("image")&&p.a.put("".concat(Y,"/avatar"),q,{withCredentials:"include"}).then((function(t){200===t.status&&(e.setPlaceholderUsers(t.data),e.checkLocalStorage())}))},className:"btn rad text-white mt-2",style:{backgroundColor:"#254E58",width:"99%"},children:"Upload new picture"})]})]})})}),Object(S.jsxs)("div",{className:"col-6",children:[A&&Object(S.jsx)("div",{className:"alert alert-warning ",role:"alert",children:Object(S.jsx)("ul",{className:"list-group list-group-flush list-unstyled",children:V[0].map((function(e,t){return Object(S.jsx)("li",{children:Object(S.jsx)("div",{children:e})},t)}))})}),_&&Object(S.jsx)("div",{className:"alert alert-success",role:"alert",children:Object(S.jsx)("ul",{className:"list-unstyled",children:H[0].map((function(e,t){return Object(S.jsx)("li",{children:Object(S.jsx)("div",{children:e})},t)}))})}),Object(S.jsx)("div",{className:"card border-0",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"card-body",children:[Object(S.jsx)("div",{className:"card-title display-4",children:"Update Information"}),Object(S.jsxs)("form",{children:[Object(S.jsx)("div",{className:"pt-3",children:Object(S.jsx)("input",{type:"email",className:"form-control",id:"updatedEmail",placeholder:"Email",onChange:function(e){return l(e.target.value)}})}),Object(S.jsx)("div",{className:"pt-3",children:Object(S.jsx)("input",{type:"tel",className:"form-control",id:"updatedPhone",maxLength:12,placeholder:"Phone",onChange:function(e){return f(e.target.value)}})}),Object(S.jsx)("div",{className:"pt-3",children:Object(S.jsx)("input",{type:"number",pattern:"[0-9]{5}",className:"form-control",id:"updatedZip",placeholder:"Zip",onChange:function(e){return w(e.target.value)}})}),Object(S.jsx)("div",{className:"pt-3",children:Object(S.jsx)("input",{type:"password",className:"form-control",id:"updatedPwd",placeholder:"Password",onChange:function(e){return k(e.target.value)}})}),Object(S.jsx)("div",{className:"pt-3",children:Object(S.jsx)("input",{type:"password",className:"form-control",id:"updatedPwd2",placeholder:"Confirm Password",onChange:function(e){return U(e.target.value)}})}),Object(S.jsxs)("div",{className:"row pt-3",children:[Object(S.jsx)("div",{className:"col",children:Object(S.jsx)("input",{type:"reset",className:"btn text-white mt-2 rad",id:"clear",style:{backgroundColor:"#254E58",width:"99%"},onClick:function(){$([]),D(!1),n(""),l(""),f(""),w(""),k(""),U("")}.bind(this),value:"Clear"})}),Object(S.jsx)("div",{className:"col",children:Object(S.jsx)("button",{className:"btn text-white mt-2 rad",id:"update",style:{backgroundColor:"#254E58",width:"99%"},onClick:W.bind(this),children:"Update"})})]})]}),Object(S.jsxs)("div",{className:"card-body",id:"info",children:[Object(S.jsx)("div",{className:"card-title display-4",children:"Current Information"}),Object(S.jsxs)("label",{htmlFor:"username",id:"hi",children:["Username:",Object(S.jsx)("span",{className:"card-text",id:"username",children:e.profileName})]}),Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("span",{className:"card-text",children:["Email: ",e.profileEmail]})}),Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("span",{className:"card-text",children:["Phone: ",e.profilePhone]})}),Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("span",{className:"card-text",children:["Zip: ",e.profileZip]})}),Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("span",{className:"card-text",children:["Password : ",e.profilePassword.replace(/./g,"*")]})})]})]})})})]})]})})]})}));var X=function(e){var t=Object(l.f)().id;return console.log(t),p.a.post("".concat("https://final-backendd.herokuapp.com","/auth/google/login"),{id:t},{withCredentials:"include"}).then((function(t){console.log(t),localStorage.setItem("username",t.data.username),e.history.push("/Main")})),null},ee=(a(73),a(37)),te=a(5),ae={},se={username:"",userStatus:"",posts:[],allPosts:[],following:[],followingImgs:[],followingStatus:[],followingNames:[],followingUserNames:[],placeholderUsers:[],profileImg:"",profileName:"",profileEmail:"",profilePhone:"",profileZip:"",profilePassword:"",comments:[]};function ne(e){var t=e.split("T"),a=t[0].split("-"),s=t[1].split(":");return new Date(a[0],a[1]-1,a[2],s[0],s[1])}var re=Object(ee.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:if(localStorage.username){if(localStorage.username){var a=localStorage.username,s=ae[a].img,n=ae[a].username,r=ae[a].email,c=ae[a].phone,o=ae[a].zipcode,i=ae[a].username;return Object(te.a)(Object(te.a)({},e),{},{username:a,profileName:n,profileEmail:r,profilePhone:c,profileZip:o,profilePassword:i,profileImg:s})}return se}return e;case I:return ae[t.users.username]={},ae[t.users.username].name=t.users.username,ae[t.users.username].username=t.users.username,ae[t.users.username].status=t.users.headline,ae[t.users.username].following=t.users.following,ae[t.users.username].img=t.users.avatar,ae[t.users.username].zipcode=t.users.zipcode,ae[t.users.username].phone=t.users.phone,ae[t.users.username].email=t.users.email,ae[t.users.username].displayName=t.users.displayName,e.placeholderUsers.push(t.users),Object(te.a)(Object(te.a)({},e),{},{placeholderUsers:e.placeholderUsers});case E:var l=ae[e.username].following,u=[],j=[],b=[],p=[];return 0===l.length||l.forEach(function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t).then((function(e){u.push(e.avatar),j.push(e.headline),b.push(e.username),p.push(e.username)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(te.a)(Object(te.a)({},e),{},{following:l,followingImgs:u,followingStatus:j,followingNames:b,followingUserNames:p});case L:var h=[],f=[];return t.posts.forEach((function(e){var t=e.date,a=[];e.comments.forEach((function(e){return a.push(e)}));var s=ne(t).toLocaleString();f.push({text:e.text,username:e.author,articleId:e.articleId,comments:a,showPost:!0,postTime:s,postImg:e.img,timeObj:s})})),f.forEach((function(t){(t.username===e.username||e.following.includes(t.username))&&h.push(t)})),Object(te.a)(Object(te.a)({},e),{},{posts:h,allPosts:f});case T:var O=e.posts.slice();return O.forEach((function(e){e.text.toLocaleLowerCase().search(t.keyword.toLocaleLowerCase())>-1||e.username.toLocaleLowerCase().search(t.keyword.toLocaleLowerCase())>-1?e.showPost=!0:e.showPost=!1})),Object(te.a)(Object(te.a)({},e),{},{posts:O});case A:if(""!==t.postText){var g=ne(t.postTime),x=g.toLocaleString(),w={text:t.postText,username:e.username,articleId:t.articleId,showPost:!0,postTime:x,postImg:t.postImage||"",timeObj:x,comments:[]};return Object(te.a)(Object(te.a)({},e),{},{posts:[w].concat(Object(C.a)(e.posts)),allPosts:[w].concat(Object(C.a)(e.allPosts))})}return e;case F:var N=e.posts.findIndex((function(e){return e.articleId===t.articleId}));return e.posts[N].comments=t.comments,Object(te.a)(Object(te.a)({},e),{},{posts:Object(C.a)(e.posts)});case _:var S=e.posts.findIndex((function(e){return e.articleId===t.articleId}));return e.posts[S].text=t.newText,Object(te.a)(Object(te.a)({},e),{},{posts:Object(C.a)(e.posts)});case z:var y=e.posts.findIndex((function(e){return e.articleId===t.articleId}));return e.posts[y].comments=t.comments,Object(te.a)(Object(te.a)({},e),{},{posts:Object(C.a)(e.posts)});case D:return localStorage.username="",localStorage.userStatus="",se;case M:var k;return k=localStorage.userStatus&&""!==localStorage.userStatus?localStorage.userStatus:ae[e.username].status,Object(te.a)(Object(te.a)({},e),{},{userStatus:k});case U:return""!==t.userStatus?(localStorage.userStatus=t.userStatus,Object(te.a)(Object(te.a)({},e),{},{userStatus:t.userStatus})):e;default:return e}}));c.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(o.a,{store:re,children:Object(S.jsx)(i.a,{children:Object(S.jsxs)(l.c,{children:[Object(S.jsx)(l.a,{path:"/main",component:K}),Object(S.jsx)(l.a,{path:"/LoginWithGoogle/:id",component:X}),Object(S.jsx)(l.a,{path:"/profile",component:Q}),Object(S.jsx)(l.a,{exact:!0,path:"/",component:B})]})})})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.917923a0.chunk.js.map